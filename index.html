<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Interactive Dussehra Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body, html {
    margin: 0; padding: 0;
    background: #f9f0e9;
    width: 100vw; height: 100vh;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }
  #game-container {
    position: relative;
    width: 100vw; height: 100vh;
    touch-action: manipulation;
    user-select: none;
    overflow: hidden;
  }
  #message {
    width: 90%;
    margin: 4vh auto 0 auto;
    font-size: 3vw;
    color: #d35400;
    text-align: center;
    text-shadow: 1px 1px 4px #fff;
    white-space: pre-line;
    z-index: 10;
  }
  #ravana {
    position: absolute;
    top: 15vh;
    left: -9vw;
    height: 50vh;
    max-width: 70vw;
    object-fit: contain;
    pointer-events: none;
    user-select: none;
    transition: height 0.3s, max-width 0.3s, top 0.3s, left 0.3s;
  }
  #click-here {
    position: absolute;
    bottom: 14vh;
    right: 42vw;
    font-size: 4vw;
    color: #d35400;
    font-weight: bold;
    user-select: none;
    cursor: pointer;
    text-shadow: 1px 1px 3px #fff;
    white-space: nowrap;
    z-index: 20;
  }
  #girl, #girl_after {
    position: absolute;
    bottom: 8vh;
    right: 10vw;
    height: 20vh;
    max-width: 30vw;
    object-fit: contain;
    pointer-events: all;
    user-select: none;
    cursor: pointer;
  }
  #girl_after { display: none; }
  #arrow {
    position: absolute;
    bottom: 8vh;
    right: 25vw;
    height: 6vh;
    max-width: 6vw;
    pointer-events: none;
    user-select: none;
    z-index: 5;
    display: none;
    transition: bottom 1.3s linear, right 1.3s linear;
  }

  /* Fire trail for arrow */
  .arrow-fire {
    position: absolute;
    background-color: yellow;
    border-radius: 50%;
    animation: fire-fade-out 0.8s forwards;
    pointer-events: none;
    will-change: transform, opacity;
  }
  @keyframes fire-fade-out {
    from { opacity: 1; transform: scale(1); }
    to { opacity: 0; transform: scale(0); }
  }

  /* Fireworks sparks */
  .firework-spark {
    position: absolute;
    border-radius: 50%;
    animation: spark-burst 1.5s ease-out forwards;
    pointer-events: none;
    will-change: transform, opacity;
  }
  @keyframes spark-burst {
    from { transform: scale(0); opacity: 1; }
    to { transform: scale(1.5); opacity: 0; }
  }
  .spark-red { background-color: #ff4500; width: 4px; height: 4px; }
  .spark-yellow { background-color: #ffd700; width: 6px; height: 6px; }
  .spark-blue { background-color: #1e90ff; width: 5px; height: 5px; }

  @media (min-width: 700px), (orientation: landscape) {
    #ravana {
      top: 35vh;
      left: 15vw;
      height: 40vh;
      max-width: 30vw;
    }
    #click-here {
      bottom: 18vh;
      right: 55vw;
      font-size: 2vw;
    }
    #girl, #girl_after {
      bottom: 10vh;
      right: 15vw;
      height: 30vh;
      max-width: 30vw;
    }
    #arrow {
      bottom: 10vh;
      right: 32vw;
      height: 8vh;
      max-width: 5vw;
    }
  }
</style>
</head>
<body>
<div id="game-container">
  <div id="message">
    Hey Sweetie, today you’re not just burning Ravana— 
    you’re burning your worries, fears, and all that weighs you down. 
    Stand tall, take that arrow of courage, and set your spirit free. 
    This is your new beginning.
  </div>

  <img id="ravana" src="ravan-animated.png" alt="Ravana" />
  <div id="click-here">Click Here →</div>
  <img id="girl" src="archer.png" alt="Girl before shot" />
  <img id="girl_after" src="archerwithout aero.jpg" alt="Girl after shot" />
  <img id="arrow" src="aero.jpg" alt="Arrow" />

  <audio id="fireworks-sound"
    src="https://gfxsounds.com/wp-content/uploads/2024/01/Fireworks-display-explosions-short-2.mp3"
    preload="auto"></audio>
</div>

<script>
  const gameContainer = document.getElementById('game-container');
  const ravana = document.getElementById('ravana');
  const girl = document.getElementById('girl');
  const girl_after = document.getElementById('girl_after');
  const arrow = document.getElementById('arrow');
  const message = document.getElementById('message');
  const clickHere = document.getElementById('click-here');
  const fireworksSound = document.getElementById('fireworks-sound');
  let arrowTrailInterval;

  function createFireworkBurst(x, y) {
    const numSparks = 80;
    const colors = ['spark-red', 'spark-yellow', 'spark-blue'];
    const radius = 100;

    for (let i = 0; i < numSparks; i++) {
      const spark = document.createElement('div');
      spark.classList.add('firework-spark', colors[Math.floor(Math.random() * colors.length)]);
      const angle = Math.random() * 2 * Math.PI;
      const endX = x + radius * Math.cos(angle);
      const endY = y + radius * Math.sin(angle);
      spark.style.left = `${x}px`;
      spark.style.top = `${y}px`;

      gameContainer.appendChild(spark);

      requestAnimationFrame(() => {
        spark.animate([
          { transform: `translate(-50%, -50%)`, opacity: 1 },
          { transform: `translate(-50%, -50%) translateX(${endX - x}px) translateY(${endY - y}px)`, opacity: 0 }
        ], {
          duration: Math.random() * 1000 + 1000,
          easing: 'ease-out',
          fill: 'forwards',
          delay: Math.random() * 500
        });
      });

      setTimeout(() => spark.remove(), 2500);
    }
  }

  function fireOffFireworks() {
    const numBursts = 15;
    for (let i = 0; i < numBursts; i++) {
      setTimeout(() => {
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight * 0.5;
        createFireworkBurst(x, y);
      }, i * 400 + Math.random() * 200);
    }
  }

  function createArrowTrail() {
    const arrowRect = arrow.getBoundingClientRect();
    const trailParticle = document.createElement('div');
    trailParticle.classList.add('arrow-fire');
    trailParticle.style.width = `${Math.random() * 5 + 3}px`;
    trailParticle.style.height = trailParticle.style.width;
    trailParticle.style.left = `${arrowRect.left + arrowRect.width / 2}px`;
    trailParticle.style.top = `${arrowRect.top + arrowRect.height / 2}px`;
    gameContainer.appendChild(trailParticle);
    setTimeout(() => trailParticle.remove(), 800);
  }

  function animateShot() {
    // Play sound immediately to satisfy mobile gesture
    try { fireworksSound.play(); } catch (e) {}

    girl.style.display = 'none';
    girl_after.style.display = 'block';
    arrow.style.display = 'block';
    clickHere.style.display = 'none';

    const ravanaRect = ravana.getBoundingClientRect();
    const arrowEndRight = window.innerWidth - (ravanaRect.left + ravanaRect.width / 2);
    const arrowEndBottom = window.innerHeight - (ravanaRect.top + ravanaRect.height / 2);

    arrowTrailInterval = setInterval(createArrowTrail, 20);

    setTimeout(() => {
      arrow.style.right = arrowEndRight + 'px';
      arrow.style.bottom = arrowEndBottom + 'px';
    }, 40);

    setTimeout(() => {
      arrow.style.display = 'none';
      ravana.src = 'ravan-burned.png';
      message.textContent =
        `You did it, Sweetie!\nYou lit up your path by letting go of what held you back.\n` +
        `Happy Dussehra, my dear!\nMay the days ahead be filled with light, laughter, big dreams, and a heart full of joy.\n` +
        `Together, we celebrate your strength and every beautiful victory.`;

      fireOffFireworks();
      clearInterval(arrowTrailInterval);
    }, 1300);
  }

  girl.addEventListener('click', animateShot);
  girl.addEventListener('touchstart', animateShot); // use touchstart for faster mobile response
</script>
</body>
</html>
